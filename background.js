chrome.action.onClicked.addListener(e=>{chrome.storage.local.get(["extensionOpened"],r=>{if(r.extensionOpened){console.log("Extension is already opened.");return}e.url&&!e.url.startsWith("chrome://")&&!e.url.startsWith("edge://")?e.id!==void 0?chrome.scripting.executeScript({target:{tabId:e.id},files:["content.js"]},()=>{chrome.runtime.lastError?console.error("Error injecting script:",chrome.runtime.lastError.message):(console.log("Script injected into:",e.url),chrome.storage.local.set({extensionOpened:!0}))}):console.error("Tab ID is undefined."):console.error("Cannot inject script into this URL:",e.url)})});chrome.runtime.onMessage.addListener((e,r,o)=>{e.action==="closeExtension"&&(chrome.storage.local.set({extensionOpened:!1}),o({status:"Extension closed"}))});
